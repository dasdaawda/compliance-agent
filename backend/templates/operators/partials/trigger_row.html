<div class="trigger-row p-2 mb-2 border rounded" 
     data-trigger-id="{{ ai_trigger.id }}"
     onclick="selectTrigger('{{ ai_trigger.id }}', '{{ ai_trigger.timestamp_sec }}')"
     style="cursor: pointer;">
    <div class="d-flex justify-content-between align-items-center">
        <div class="flex-grow-1">
            <div class="d-flex align-items-center">
                <span class="badge bg-secondary me-2">{{ ai_trigger.get_trigger_source_display }}</span>
                <strong>{{ ai_trigger.timestamp_sec }}s</strong>
                {% if ai_trigger.confidence %}
                    <small class="text-muted ms-2">{{ ai_trigger.confidence }}%</small>
                {% endif %}
            </div>
            {% if ai_trigger.data %}
                <small class="text-muted d-block mt-1">
                    {% if ai_trigger.data.text %}
                        "{{ ai_trigger.data.text|truncatechars:50 }}"
                    {% elif ai_trigger.data.objects %}
                        {{ ai_trigger.data.objects|length }} объектов
                    {% else %}
                        {{ ai_trigger.data|truncatechars:50 }}
                    {% endif %}
                </small>
            {% endif %}
        </div>
        <div class="text-end">
            <small class="text-muted">{{ ai_trigger.created_at|date:"H:i" }}</small>
        </div>
    </div>
</div>