# üéØ AI-–ö–æ–º–ø–ª–∞–µ–Ω—Å –ê–≥–µ–Ω—Ç

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–ª–∞–µ–Ω—Å-—Ä–∏—Å–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

AI-–ö–æ–º–ø–ª–∞–µ–Ω—Å –ê–≥–µ–Ω—Ç - —ç—Ç–æ MVP —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–∞ "–ö–µ–Ω—Ç–∞–≤—Ä" (AI + –û–ø–µ—Ä–∞—Ç–æ—Ä) –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –±–ª–æ–≥–µ—Ä–æ–≤ –∏ –≤–∏–¥–µ–æ—Å—Ç—É–¥–∏–π. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ–∫–æ–Ω—Ç–µ–Ω—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI-–º–æ–¥–µ–ª–µ–π (Whisper, YOLO, NSFW-–¥–µ—Ç–µ–∫—Ç–æ—Ä—ã) –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤:

- üîû NSFW –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —ç—Ä–æ—Ç–∏–∫–∞
- ü©∏ –ñ–µ—Å—Ç—å, –Ω–∞—Å–∏–ª–∏–µ, –∫—Ä–æ–≤—å
- ü§¨ –ù–µ—Ü–µ–Ω–∑—É—Ä–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞
- üì¢ –ù–µ–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∫–ª–∞–º–∞
- üö¨ –ê–ª–∫–æ–≥–æ–ª—å, —Ç–∞–±–∞–∫, –Ω–∞—Ä–∫–æ—Ç–∏–∫–∏
- ‚ö†Ô∏è –ó–∞–ø—Ä–µ—â–µ–Ω–Ω–∞—è —Å–∏–º–≤–æ–ª–∏–∫–∞
- üìù –ù–∞—Ä—É—à–µ–Ω–∏—è 436-–§–ó –∏ 20.3 –ö–æ–ê–ü

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±–∑–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

AI Compliance Agent - —ç—Ç–æ "–∫–µ–Ω—Ç–∞–≤—Ä" (AI + —á–µ–ª–æ–≤–µ–∫-–æ–ø–µ—Ä–∞—Ç–æ—Ä) —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ–∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∫–æ–º–ø–ª–∞–µ–Ω—Å-—Ä–∏—Å–∫–æ–≤. –û–Ω–∞ —Å–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ Django –º–æ–Ω–æ–ª–∏—Ç, Django REST Framework (DRF) API, HTMX-–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, Celery workers, Redis, PostgreSQL, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ Backblaze B2 —Å Cloudflare CDN –∏ AI-–º–æ–¥–µ–ª–∏ –Ω–∞ Replicate.

–ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:

- **Django 5 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å –º–æ–¥—É–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (`backend/compliance_app/settings/`)
- **REST API** —á–µ—Ä–µ–∑ DRF —Å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **HTMX Frontend** –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö dashboards –∏ –∫–æ–Ω—Å–æ–ª–µ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- **Celery Workers & Beat** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ AI-–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- **Redis** –¥–ª—è –±—Ä–æ–∫–µ—Ä–∞ Celery, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è signed URLs –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- **PostgreSQL** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø—Ä–æ–µ–∫—Ç—ã, –≤–∏–¥–µ–æ, —Ç—Ä–∏–≥–≥–µ—Ä—ã, –º–µ—Ç–∫–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ pipeline)
- **Backblaze B2 + Cloudflare** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∏ CDN-–¥–∏—Å—Ç—Ä–∏–±—É—Ü–∏–∏
- **Replicate** –¥–ª—è GPU-–∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ AI (Whisper, YOLO, NSFW/Violence –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã, OCR)

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|------------|
| **Backend** | Python 3.11, Django 5 | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| **Frontend** | Django Templates, HTMX, Bootstrap 5 | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| **Task Queue** | Celery + Redis | –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| **Database** | PostgreSQL (jsonb –¥–ª—è AI –æ—Ç—á–µ—Ç–æ–≤) | –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ |
| **Storage** | Backblaze B2 + Cloudflare CDN | –§–∞–π–ª—ã –∏ CDN |
| **AI Inference** | Replicate (Serverless GPU) | AI-–º–æ–¥–µ–ª–∏ |

### AI –ú–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|------------|
| OpenAI Whisper (small) | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ (ASR) |
| YOLOv8s | –î–µ—Ç–µ–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ |
| Falconsai NSFW | –î–µ—Ç–µ–∫—Ü–∏—è 18+ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ |
| ViT Violence | –î–µ—Ç–µ–∫—Ü–∏—è –∂–µ—Å—Ç–∏/–Ω–∞—Å–∏–ª–∏—è |
| EasyOCR | –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ai-compliance-agent/
‚îú‚îÄ‚îÄ docs/                       # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ LOCAL_DEVELOPMENT.md   # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
‚îú‚îÄ‚îÄ backend/                    # Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ compliance_app/         # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings/           # –ú–æ–¥—É–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py     # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py         # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dev.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prod.py         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ production
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config_validator.py # –í–∞–ª–∏–¥–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ users/                  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (Client/Operator/Admin)
‚îÇ   ‚îú‚îÄ‚îÄ projects/               # –ü—Ä–æ–µ–∫—Ç—ã –∏ –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ ai_pipeline/            # AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ (Celery tasks, AI services)
‚îÇ   ‚îú‚îÄ‚îÄ operators/              # –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ admins/                 # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ storage/                # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å B2/Cloudflare
‚îú‚îÄ‚îÄ scripts/                    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ entrypoint.sh           # Docker entrypoint –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ collectstatic
‚îú‚îÄ‚îÄ celery-worker/              # –°–∫—Ä–∏–ø—Ç—ã Celery worker
‚îú‚îÄ‚îÄ .env.example                # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è production
‚îú‚îÄ‚îÄ .env.docker                 # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è Docker Compose
‚îú‚îÄ‚îÄ Dockerfile                  # Multi-stage Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (pinned versions)
‚îú‚îÄ‚îÄ requirements.dev.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ README.md                   # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üìñ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

**–ù–æ–≤–∏—á–∫–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å –ø–æ–ª–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**

**[üìö docs/LOCAL_DEVELOPMENT.md](docs/LOCAL_DEVELOPMENT.md)** - –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º.

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –æ–ø—ã—Ç, –Ω–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫—Ä–∞—Ç–∫–∏–µ —à–∞–≥–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

- **Python 3.11+** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ: `python --version`
- **PostgreSQL** (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker) - `postgres --version`
- **Redis** (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker) - `redis-cli --version`
- **Docker & Docker Compose** (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):
  - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker: https://docs.docker.com/get-docker/
  - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `docker --version` –∏ `docker compose --version`
- **Git** - `git --version`
- **curl** –∏–ª–∏ **wget** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API endpoints

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

**macOS —Å Homebrew:**
```bash
brew install python@3.11 postgresql redis docker-desktop
```

**Ubuntu/Debian:**
```bash
sudo apt-get install -y python3.11 python3.11-venv python3.11-dev \
  postgresql-client redis-tools docker.io docker-compose
```

**Fedora/RHEL:**
```bash
sudo dnf install -y python3.11 python3.11-devel postgresql-libs redis docker docker-compose
```

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
./setup_env.sh

# –û—Ç–∫—Ä–æ–π—Ç–µ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
nano .env
```

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django
- `DATABASE_URL` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- `REDIS_URL` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
- `REPLICATE_API_TOKEN` - —Ç–æ–∫–µ–Ω Replicate API
- `BACKBLAZE_*` - credentials Backblaze B2

### 2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (DJANGO_ENV)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```bash
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø—Ä–æ—â–µ –≤—Å–µ–≥–æ)
DJANGO_ENV=development

# –î–ª—è production-like —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
DJANGO_ENV=production
```

**–†–∞–∑–ª–∏—á–∏—è:**
- `development`: DEBUG=True, SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, email –≤ –∫–æ–Ω—Å–æ–ª—å, –±–µ–∑ HTTPS redirect
- `production`: DEBUG=False, PostgreSQL —Ç—Ä–µ–±—É–µ—Ç—Å—è, SMTP —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Å—Ç—Ä–æ–≥–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 3. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Docker
cp .env.docker .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec web python manage.py migrate

# –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker compose exec web python manage.py createsuperuser

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f web

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose down
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Docker**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt -r requirements.dev.txt

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
export DJANGO_ENV=development
export DATABASE_URL=sqlite:///db.sqlite3

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Redis (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
redis-server

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
cd backend
python manage.py migrate

# –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
python manage.py createsuperuser

# –°–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏–∫—É
python manage.py collectstatic --noinput

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
python manage.py runserver

# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Celery
celery -A compliance_app worker --loglevel=info
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
python backend/compliance_app/config_validator.py
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
‚úÖ Configuration is valid! All variables are set correctly.
```

## üìö –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### üìñ –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–º.: [üìö docs/LOCAL_DEVELOPMENT.md](docs/LOCAL_DEVELOPMENT.md)**

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –≤–∫–ª—é—á–∞–µ—Ç:
- –ü–æ–¥—Ä–æ–±–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Docker –∏ –Ω–∞—Ç–∏–≤–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É
- Troubleshooting –∏ —Å–æ–≤–µ—Ç—ã

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (Makefile)

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
make help

# Docker —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make docker-up           # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make docker-migrate      # –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make docker-logs         # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make docker-down         # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make install            # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make migrate            # –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make test               # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
make lint               # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥
```

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
cd backend
python manage.py makemigrations
python manage.py migrate
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# Django test runner
cd backend
python manage.py test

# –° pytest (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
pytest --cov=. --cov-report=html --cov-report=term
```

### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
flake8 backend/
black backend/
isort backend/
```

### –û—Ç–ª–∞–¥–∫–∞

**Django shell:**
```bash
cd backend
python manage.py shell
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
```bash
python manage.py check --deploy
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π:

```
backend/compliance_app/settings/
‚îú‚îÄ‚îÄ __init__.py      # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ DJANGO_ENV
‚îú‚îÄ‚îÄ base.py          # –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ dev.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (DEBUG=True, –æ—Å–ª–∞–±–ª–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
‚îî‚îÄ‚îÄ prod.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ production (—Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ –¥–æ–º–µ–Ω–∞–º

#### Django Core

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|------------|-------------|
| `DJANGO_ENV` | –í—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è (`development` –∏–ª–∏ `production`) | –ù–µ—Ç | `production` |
| `SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ | –î–∞ | `unsafe-secret-key` |
| `DEBUG` | –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ | –ù–µ—Ç | `False` |
| `ALLOWED_HOSTS` | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é | –ù–µ—Ç | `[]` |

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | Dev | Prod |
|------------|----------|------------|-----|------|
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö | –î–∞ | SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | PostgreSQL –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω |

#### Redis

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------------|----------|------------|
| `REDIS_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis | –î–∞ |

#### –•—Ä–∞–Ω–∏–ª–∏—â–µ / Backblaze B2

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------------|----------|------------|
| `BACKBLAZE_ENDPOINT_URL` | Endpoint URL B2 | –î–∞ |
| `BACKBLAZE_APPLICATION_KEY_ID` | Application Key ID | –î–∞ |
| `BACKBLAZE_APPLICATION_KEY` | Application Key | –î–∞ |
| `BACKBLAZE_BUCKET_NAME` | –ò–º—è –±–∞–∫–µ—Ç–∞ | –î–∞ |

#### Replicate AI Services

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | Dev | Prod |
|------------|----------|------------|-----|------|
| `REPLICATE_API_TOKEN` | API —Ç–æ–∫–µ–Ω Replicate | –ù–µ—Ç | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |

#### Email

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | Dev | Prod |
|------------|----------|------------|-----|------|
| `EMAIL_HOST` | SMTP —Ö–æ—Å—Ç | –ù–µ—Ç | –ö–æ–Ω—Å–æ–ª—å | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| `EMAIL_PORT` | SMTP –ø–æ—Ä—Ç | –ù–µ—Ç | –ö–æ–Ω—Å–æ–ª—å | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| `EMAIL_HOST_USER` | SMTP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –ù–µ—Ç | –ö–æ–Ω—Å–æ–ª—å | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| `EMAIL_HOST_PASSWORD` | SMTP –ø–∞—Ä–æ–ª—å | –ù–µ—Ç | –ö–æ–Ω—Å–æ–ª—å | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |

#### Cloudflare / CDN

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
|------------|----------|------------|
| `CLOUDFLARE_ZONE_ID` | Zone ID Cloudflare | –ù–µ—Ç |
| `CLOUDFLARE_API_TOKEN` | API —Ç–æ–∫–µ–Ω Cloudflare | –ù–µ—Ç |

#### AI Pipeline

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|------------|-------------|
| `ALLOWED_VIDEO_FORMATS` | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤–∏–¥–µ–æ | –ù–µ—Ç | `mp4,avi,mov,mkv,webm` |
| `MAX_VIDEO_FILE_SIZE` | –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ (–±–∞–π—Ç—ã) | –ù–µ—Ç | `2147483648` (2GB) |
| `MAX_VIDEO_DURATION` | –ú–∞–∫—Å. –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ (—Å–µ–∫) | –ù–µ—Ç | `3600` (1 —á–∞—Å) |

#### Celery

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|------------|-------------|
| `CELERY_BROKER_URL` | URL –±—Ä–æ–∫–µ—Ä–∞ Celery | –ù–µ—Ç | `REDIS_URL` |
| `CELERY_RESULT_BACKEND` | URL –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | –ù–µ—Ç | `REDIS_URL` |

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ B2 –∏ Retry

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|-------------|
| `B2_MAX_RETRIES` | –ú–∞–∫—Å. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ B2 | `3` |
| `B2_RETRY_BACKOFF` | Initial backoff –≤ —Å–µ–∫—É–Ω–¥–∞—Ö | `1` |
| `B2_RETRY_BACKOFF_MAX` | –ú–∞–∫—Å. backoff –≤ —Å–µ–∫—É–Ω–¥–∞—Ö | `60` |

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# .env —Ñ–∞–π–ª (development mode)
DJANGO_ENV=development
DEBUG=True
SECRET_KEY=your-development-key-change-in-production
ALLOWED_HOSTS=localhost,127.0.0.1
DATABASE_URL=sqlite:///db.sqlite3
REDIS_URL=redis://localhost:6379/0
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã (–Ω–µ –±—É–¥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã)
REPLICATE_API_TOKEN=test_token_123
BACKBLAZE_ENDPOINT_URL=https://s3.us-west-000.backblazeb2.com
BACKBLAZE_APPLICATION_KEY_ID=test_key_id
BACKBLAZE_APPLICATION_KEY=test_key
BACKBLAZE_BUCKET_NAME=test-bucket
```

#### Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# .env —Ñ–∞–π–ª (production mode)
DJANGO_ENV=production
SECRET_KEY=your-very-secure-secret-key-here
DEBUG=False
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com
DATABASE_URL=postgres://user:password@host:5432/dbname
REDIS_URL=redis://user:password@host:6379/0

# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# Backblaze B2
BACKBLAZE_ENDPOINT_URL=https://s3.us-west-000.backblazeb2.com
BACKBLAZE_APPLICATION_KEY_ID=your-key-id
BACKBLAZE_APPLICATION_KEY=your-secret-key
BACKBLAZE_BUCKET_NAME=your-bucket

# Replicate AI
REPLICATE_API_TOKEN=r8_your-replicate-token

# Cloudflare CDN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
CLOUDFLARE_ZONE_ID=your-zone-id
CLOUDFLARE_API_TOKEN=your-cloudflare-token

# –î–∞—à–±–æ—Ä–¥ URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
DASHBOARD_URL=https://yourdomain.com/client/dashboard/
```

## üì° API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–≤–∞ complementary –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

- **REST API** (`/api/*`) - JSON –æ—Ç–≤–µ—Ç—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
  - JWT —Ç–æ–∫–µ–Ω-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π, –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
  
- **HTMX Interface** (`/client/*`) - Server-rendered HTML partials
  - Django session –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º JavaScript
  - CSRF –∑–∞—â–∏—Ç–∞ –≤–∫–ª—é—á–µ–Ω–∞

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### JWT –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (REST API)

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
```http
POST /api/auth/token/
Content-Type: application/json

{
  "username": "user@example.com",
  "password": "your_password"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access": "eyJ0eXAiOiJKV1QiLCJhbGc...",
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc..."
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
```http
POST /api/auth/token/refresh/
Content-Type: application/json

{
  "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc..."
}
```

**–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤:**
- Access token: 1 —á–∞—Å
- Refresh token: 7 –¥–Ω–µ–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
–í–∫–ª—é—á–∞–π—Ç–µ access —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization` –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤:
```http
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGc...
```

#### Session –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (HTMX)

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è Django session-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
- Login: `POST /client/users/login/`
- Logout: `POST /client/users/logout/`
- CSRF —Ç–æ–∫–µ–Ω —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å–æ–≤
- Session cookie –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º

### Base URLs

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | Base URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|----------|
| –õ–æ–∫–∞–ª—å–Ω–æ–µ | `http://localhost:8000` | –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ |
| Production | `https://yourdomain.com` | –ü—Ä–æ–¥–∞–∫—à–Ω |

### API –†–µ—Å—É—Ä—Å—ã

| –†–µ—Å—É—Ä—Å | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|--------|----------|
| **Projects** | `/api/projects/` | GET, POST, PUT, DELETE | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ |
| **Videos** | `/api/videos/` | GET, POST, PUT, DELETE | –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ |
| **AITriggers** | `/api/triggers/` | GET, POST, PUT, DELETE | AI —Ç—Ä–∏–≥–≥–µ—Ä—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ |
| **VerificationTasks** | `/api/verification-tasks/` | GET, POST, PUT, DELETE | –ó–∞–¥–∞—á–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ |
| **OperatorLabels** | `/api/operator-labels/` | GET, POST, PUT, DELETE | –ú–µ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ |
| **PipelineExecutions** | `/api/pipeline-executions/` | GET, POST, PUT, DELETE | –°—Ç–∞—Ç—É—Å—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ pipeline |
| **RiskDefinitions** | `/api/risk-definitions/` | GET, POST, PUT, DELETE | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∏—Å–∫–æ–≤ |
| **Users** | `/api/users/` | GET, PUT, PATCH | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| **Auth** | `/api/auth/token/` | POST | JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```http
POST /api/projects/
Authorization: Bearer your-access-token
Content-Type: application/json

{
  "name": "My Video Project",
  "description": "Test project for compliance checking"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "name": "My Video Project",
  "description": "Test project for compliance checking",
  "owner": 1,
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ

```http
POST /api/videos/
Authorization: Bearer your-access-token
Content-Type: multipart/form-data

project_id=1
file=@/path/to/video.mp4
title=Test Video
description=Test video for compliance
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "title": "Test Video",
  "description": "Test video for compliance",
  "project": 1,
  "file": "/media/videos/test_video.mp4",
  "file_size": 52428800,
  "duration": 300,
  "checksum": "sha256:abc123...",
  "status": "uploaded",
  "created_at": "2024-01-15T10:35:00Z"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤

```http
GET /api/projects/
Authorization: Bearer your-access-token
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "count": 1,
  "next": null,
  "previous": null,
  "results": [
    {
      "id": 1,
      "name": "My Video Project",
      "description": "Test project for compliance checking",
      "owner": 1,
      "video_count": 3,
      "created_at": "2024-01-15T10:30:00Z"
    }
  ]
}
```

### HTMX Interface

HTMX –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –Ω–æ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `/client/` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML partials –≤–º–µ—Å—Ç–æ JSON.

#### –û—Å–Ω–æ–≤–Ω—ã–µ HTMX —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/client/dashboard/` | GET | –ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ |
| `/client/projects/` | GET, POST | –°–ø–∏—Å–æ–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ |
| `/client/projects/{id}/` | GET, PUT, DELETE | –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ |
| `/client/videos/upload/` | GET, POST | –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ |
| `/client/reports/{id}/` | GET | –î–µ—Ç–∞–ª–∏ –æ—Ç—á–µ—Ç–∞ |

### –°—Ç–∞—Ç—É—Å—ã –∏ –∫–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 200 | OK - —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å |
| 201 | Created - —Ä–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω |
| 400 | Bad Request - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| 401 | Unauthorized - —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| 403 | Forbidden - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ |
| 404 | Not Found - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 429 | Too Many Requests - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç |
| 500 | Internal Server Error - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è

–í—Å–µ list —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é:

```http
GET /api/projects/?page=2&page_size=10
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "count": 25,
  "next": "http://localhost:8000/api/projects/?page=3",
  "previous": "http://localhost:8000/api/projects/?page=1",
  "results": [...]
}
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

–í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `multipart/form-data`:

```http
POST /api/videos/
Authorization: Bearer your-access-token
Content-Type: multipart/form-data

project_id=1
file=@video.mp4
title=My Video
description=Description
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä: 2GB
- –§–æ—Ä–º–∞—Ç—ã: mp4, avi, mov, mkv, webm
- –ú–∞–∫—Å. –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 1 —á–∞—Å

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

- **Swagger UI**: `/api/docs/`
- **ReDoc**: `/api/redoc/`
- **OpenAPI Schema**: `/api/schema/`

## üöÄ Production Deployment

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é

#### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

- Python 3.11+
- PostgreSQL 12+
- Redis 6+
- Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Backblaze B2 –∞–∫–∫–∞—É–Ω—Ç
- Replicate API —Ç–æ–∫–µ–Ω

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ production `.env` —Ñ–∞–π–ª:

```bash
# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DJANGO_ENV=production
SECRET_KEY=your-very-secure-secret-key-here
DEBUG=False
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
DATABASE_URL=postgres://user:password@host:5432/dbname

# Redis
REDIS_URL=redis://user:password@host:6379/0

# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# Backblaze B2
BACKBLAZE_ENDPOINT_URL=https://s3.us-west-000.backblazeb2.com
BACKBLAZE_APPLICATION_KEY_ID=your-key-id
BACKBLAZE_APPLICATION_KEY=your-secret-key
BACKBLAZE_BUCKET_NAME=your-bucket

# Replicate AI
REPLICATE_API_TOKEN=r8_your-replicate-token

# Cloudflare CDN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
CLOUDFLARE_ZONE_ID=your-zone-id
CLOUDFLARE_API_TOKEN=your-cloudflare-token

# –î–∞—à–±–æ—Ä–¥ URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
DASHBOARD_URL=https://yourdomain.com/client/dashboard/
```

#### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
python backend/compliance_app/config_validator.py
```

### –î–µ–ø–ª–æ–π –Ω–∞ DigitalOcean App Platform

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å:
- `Dockerfile`
- `docker-compose.yml`
- `.env.example`
- `requirements.txt` —Å pinned –≤–µ—Ä—Å–∏—è–º–∏

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ó–∞–π–¥–∏—Ç–µ –≤ DigitalOcean Control Panel
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ App Platform –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ –≤—ã—à–µ

#### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**Web Service:**
- Build Command: `cd backend && python manage.py collectstatic --noinput`
- Run Command: `cd backend && gunicorn compliance_app.wsgi:application --bind 0.0.0.0:$PORT`
- Instance Size: 1GB RAM (–º–∏–Ω–∏–º—É–º)
- HTTP Port: 8000

**Worker Service (Celery):**
- Run Command: `cd backend && celery -A compliance_app worker --loglevel=info`
- Instance Size: 1GB RAM (–º–∏–Ω–∏–º—É–º)

**Database:**
- PostgreSQL 1GB RAM
- –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ connection string

**Redis:**
- Redis 1GB RAM
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ connection string

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

**Backblaze B2:**
1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://www.backblaze.com/b2/sign-up.html
2. –°–æ–∑–¥–∞–π—Ç–µ Private –±–∞–∫–µ—Ç
3. –°–æ–∑–¥–∞–π—Ç–µ Application Key —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ –∑–∞–ø–∏—Å—å
4. –î–æ–±–∞–≤—å—Ç–µ credentials –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Cloudflare CDN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
1. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω –≤ Cloudflare
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CNAME –¥–ª—è CDN
3. –°–æ–∑–¥–∞–π—Ç–µ API —Ç–æ–∫–µ–Ω —Å Zone:Edit –ø—Ä–∞–≤–∞–º–∏
4. –î–æ–±–∞–≤—å—Ç–µ Zone ID –∏ —Ç–æ–∫–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 5. –ó–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è

1. Commit –∏ push –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. DigitalOcean –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π
3. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ DigitalOcean dashboard

#### 6. –ü–æ—Å—Ç-–¥–µ–ø–ª–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
# –ß–µ—Ä–µ–∑ DigitalOcean console –∏–ª–∏ SSH
doctl apps exec YOUR_APP_ID --command "cd backend && python manage.py migrate"
```

**–°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```bash
doctl apps exec YOUR_APP_ID --command "cd backend && python manage.py createsuperuser"
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:**
- –û—Ç–∫—Ä–æ–π—Ç–µ https://yourdomain.com
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ /admin/ –ø–∞–Ω–µ–ª—å
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É –≤–∏–¥–µ–æ

### Docker Deployment

#### 1. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
docker build -t ai-compliance-agent .
```

#### 2. –ó–∞–ø—É—Å–∫ —Å Docker Compose

```bash
# Production compose —Ñ–∞–π–ª
docker-compose -f docker-compose.prod.yml up -d
```

#### 3. –ü—Ä–∏–º–µ—Ä docker-compose.prod.yml

```yaml
version: '3.8'

services:
  web:
    image: ai-compliance-agent:latest
    command: gunicorn compliance_app.wsgi:application --bind 0.0.0.0:8000
    ports:
      - "8000:8000"
    environment:
      - DJANGO_ENV=production
    env_file:
      - .env.production
    depends_on:
      - db
      - redis

  worker:
    image: ai-compliance-agent:latest
    command: celery -A compliance_app worker --loglevel=info
    environment:
      - DJANGO_ENV=production
    env_file:
      - .env.production
    depends_on:
      - db
      - redis

  beat:
    image: ai-compliance-agent:latest
    command: celery -A compliance_app beat --loglevel=info
    environment:
      - DJANGO_ENV=production
    env_file:
      - .env.production
    depends_on:
      - db
      - redis

  db:
    image: postgres:15
    environment:
      POSTGRES_DB: ai_compliance_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    command: redis-server --requirepass ${REDIS_PASSWORD}

volumes:
  postgres_data:
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –õ–æ–≥–∏ DigitalOcean

```bash
# –õ–æ–≥–∏ web —Å–µ—Ä–≤–∏—Å–∞
doctl apps logs YOUR_APP_ID --type run

# –õ–æ–≥–∏ worker
doctl apps logs YOUR_APP_ID --type worker

# –õ–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
doctl apps logs YOUR_APP_ID
```

#### –õ–æ–≥–∏ Docker

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker compose logs -f web
docker compose logs -f worker
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

- **DigitalOcean App Platform**: Built-in metrics dashboard
- **Backblaze B2**: https://secure.backblaze.com/b2_buckets.htm
- **Replicate**: https://replicate.com/account/billing
- **Cloudflare**: Analytics dashboard

## üîß Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –û—à–∏–±–∫–∞: "REPLICATE_API_TOKEN must be set"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª
cat .env | grep REPLICATE_API_TOKEN

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
python backend/compliance_app/config_validator.py
```

#### 2. –û—à–∏–±–∫–∞: "Cannot connect to database"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL
echo $DATABASE_URL

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
cd backend
python manage.py dbshell
```

#### 3. –û—à–∏–±–∫–∞: "Redis connection refused"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis
redis-cli ping
# –î–æ–ª–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å: PONG

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ REDIS_URL
echo $REDIS_URL
```

#### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ B2 credentials
python -c "
import os
from backend.storage.b2_utils import B2Utils
b2 = B2Utils()
print('B2 connection:', b2.test_connection())
"
```

#### 5. –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
python manage.py showmigrations

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate --fake-initial

# –û—Ç–∫–∞—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
python manage.py migrate app_name migration_name
```

### –û—Ç–ª–∞–¥–∫–∞ –≤ development

#### Django debug toolbar

```bash
pip install django-debug-toolbar
# –î–æ–±–∞–≤—å—Ç–µ 'debug_toolbar' –≤ INSTALLED_APPS
# –î–æ–±–∞–≤—å—Ç–µ –≤ MIDDLEWARE
```

#### SQL –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# settings/dev.py
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
        },
    },
    'loggers': {
        'django.db.backends': {
            'handlers': ['console'],
            'level': 'DEBUG',
        },
    },
}
```

#### –û—Ç–ª–∞–¥–∫–∞ Celery

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Celery
celery -A compliance_app inspect active

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥–∏
celery -A compliance_app inspect reserved

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
celery -A compliance_app events
```

### Production –ø—Ä–æ–±–ª–µ–º—ã

#### High memory usage

1. –£–≤–µ–ª–∏—á—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–Ω—Å—Ç–∞–Ω—Å–∞
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `CELERY_WORKER_CONCURRENCY`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CELERY_WORKER_MAX_TASKS_PER_CHILD`

#### Slow response times

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `django-debug-toolbar` –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (select_related, prefetch_related)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

#### File upload issues

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ nginx/web —Å–µ—Ä–≤–µ—Ä–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ B2 –±–∞–∫–µ—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å B2

### Health checks

#### Django health check

```bash
python manage.py check --deploy
```

#### Custom health check endpoint

```http
GET /api/health/
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "database": "ok",
  "redis": "ok",
  "b2": "ok",
  "replicate": "ok"
}
```

## üí∞ –û—Ü–µ–Ω–∫–∞ –∑–∞—Ç—Ä–∞—Ç (MVP)

### DigitalOcean App Platform

| –°–µ—Ä–≤–∏—Å | –¶–µ–Ω–∞/–º–µ—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| Web Service (1GB RAM) | $12 | Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ |
| Celery Worker (1GB RAM) | $12 | –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| PostgreSQL (1GB RAM) | $12 | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| Redis (1GB RAM) | $15 | –ö—ç—à –∏ –±—Ä–æ–∫–µ—Ä |
| **–ò—Ç–æ–≥–æ:** | **~$51/–º–µ—Å** | |

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –¶–µ–Ω–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| **Backblaze B2** | $6/TB/–º–µ—Å | –•—Ä–∞–Ω–∏–ª–∏—â–µ |
| **Replicate** | ~$0.0002/—Å–µ–∫ | GPU –∏–Ω—Ñ–µ—Ä–µ–Ω—Å |
| **Cloudflare CDN** | $0 | –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π egress —Å B2 |

**–ü—Ä–∏–º–µ—Ä:** –û–±—Ä–∞–±–æ—Ç–∫–∞ 100 –≤–∏–¥–µ–æ –ø–æ 10 –º–∏–Ω—É—Ç = ~$10-15/–º–µ—Å (Replicate)

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

### Backblaze B2

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://www.backblaze.com/b2/sign-up.html
2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∫–µ—Ç (Private)
3. –°–æ–∑–¥–∞–π—Ç–µ Application Key
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials –≤ `.env`

### Replicate

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://replicate.com
2. –°–æ–∑–¥–∞–π—Ç–µ API —Ç–æ–∫–µ–Ω: https://replicate.com/account/api-tokens
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `r8_`) –≤ `.env`

### Cloudflare (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://cloudflare.com
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CNAME –¥–ª—è CDN
4. –°–æ–∑–¥–∞–π—Ç–µ API —Ç–æ–∫–µ–Ω
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Zone ID –∏ —Ç–æ–∫–µ–Ω –≤ `.env`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `.env` —Ñ–∞–π–ª –≤ `.gitignore`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ B2 –±–∞–∫–µ—Ç—ã –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ (signed URLs)
- ‚úÖ PostgreSQL/Redis —Å SSL –≤ production
- ‚úÖ Django security middleware –≤–∫–ª—é—á–µ–Ω

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

‚úÖ MVP v1.0 - –ì–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é
- –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ environment variables
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å B2, Replicate, Cloudflare

### –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã (v2.0)

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–ª–∏–Ω–≥ (Stripe)
- [ ] –û–±—É—á–µ–Ω–∏–µ custom YOLOv8 –Ω–∞ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] Faster-Whisper –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è ASR
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- [ ] –ü–ª–∞–≥–∏–Ω—ã –¥–ª—è Adobe Premiere / DaVinci Resolve
- [ ] Mobile-responsive operator workbench

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - All rights reserved

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é! üéâ**

–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∑–∞—Ç–µ–º —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–æ –¥–µ–ø–ª–æ—é.